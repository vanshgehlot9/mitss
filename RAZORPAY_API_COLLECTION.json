{
  "info": {
    "name": "Razorpay Payment Gateway API",
    "description": "Complete Razorpay integration API endpoints for testing",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Create Razorpay Order",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"amount\": 1000,\n  \"currency\": \"INR\",\n  \"customer\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"phone\": \"9876543210\"\n  },\n  \"items\": [\n    {\n      \"productId\": \"prod_001\",\n      \"productName\": \"Handmade Vase\",\n      \"quantity\": 1,\n      \"price\": 1000,\n      \"image\": \"https://example.com/vase.jpg\"\n    }\n  ],\n  \"shippingAddress\": {\n    \"fullName\": \"John Doe\",\n    \"phone\": \"9876543210\",\n    \"email\": \"john@example.com\",\n    \"addressLine1\": \"123 Main Street\",\n    \"addressLine2\": \"Apartment 4B\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"postalCode\": \"400001\",\n    \"country\": \"India\"\n  },\n  \"billingAddress\": {\n    \"fullName\": \"John Doe\",\n    \"phone\": \"9876543210\",\n    \"email\": \"john@example.com\",\n    \"addressLine1\": \"123 Main Street\",\n    \"city\": \"Mumbai\",\n    \"state\": \"Maharashtra\",\n    \"postalCode\": \"400001\",\n    \"country\": \"India\"\n  },\n  \"notes\": {\n    \"order_type\": \"online\",\n    \"source\": \"website\"\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/razorpay/create-order",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "razorpay", "create-order"]
        },
        "description": "Creates a new Razorpay order and stores it in the database. Returns orderId and razorpayOrderId needed for payment."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:3000/api/razorpay/create-order",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "razorpay", "create-order"]
            }
          },
          "status": "Created",
          "code": 201,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"orderId\": \"ORD-1234567890-1234\",\n  \"razorpayOrderId\": \"order_MNop123456\",\n  \"amount\": 100000,\n  \"currency\": \"INR\",\n  \"keyId\": \"rzp_test_RfFWI9Ba2Hz1e1\",\n  \"message\": \"Order created successfully\"\n}"
        }
      ]
    },
    {
      "name": "2. Verify Payment",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"razorpay_order_id\": \"order_MNop123456\",\n  \"razorpay_payment_id\": \"pay_ABcd123456\",\n  \"razorpay_signature\": \"abc123def456ghi789jkl012mno345pqr678stu901vwx234yz\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/razorpay/verify-payment",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "razorpay", "verify-payment"]
        },
        "description": "Verifies the payment signature received from Razorpay after successful payment. Updates order and payment status in database."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:3000/api/razorpay/verify-payment",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "razorpay", "verify-payment"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"verified\": true,\n  \"orderId\": \"ORD-1234567890-1234\",\n  \"paymentId\": \"pay_ABcd123456\",\n  \"status\": \"paid\",\n  \"message\": \"Payment verified successfully\",\n  \"order\": {\n    \"orderId\": \"ORD-1234567890-1234\",\n    \"status\": \"paid\",\n    \"totalAmount\": 1000\n  }\n}"
        }
      ]
    },
    {
      "name": "3. Get Order Details",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/razorpay/create-order?orderId=ORD-1234567890-1234",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "razorpay", "create-order"],
          "query": [
            {
              "key": "orderId",
              "value": "ORD-1234567890-1234",
              "description": "Your internal order ID"
            }
          ]
        },
        "description": "Retrieves order details from the database using orderId"
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/razorpay/create-order?orderId=ORD-1234567890-1234",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "razorpay", "create-order"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"order\": {\n    \"orderId\": \"ORD-1234567890-1234\",\n    \"razorpayOrderId\": \"order_MNop123456\",\n    \"status\": \"paid\",\n    \"totalAmount\": 1000,\n    \"customer\": {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}"
        }
      ]
    },
    {
      "name": "4. Get Payment Details",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3000/api/razorpay/verify-payment?paymentId=pay_ABcd123456",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "razorpay", "verify-payment"],
          "query": [
            {
              "key": "paymentId",
              "value": "pay_ABcd123456",
              "description": "Razorpay payment ID"
            },
            {
              "key": "orderId",
              "value": "ORD-1234567890-1234",
              "description": "Or use orderId instead",
              "disabled": true
            }
          ]
        },
        "description": "Retrieves payment details from database using paymentId or orderId"
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:3000/api/razorpay/verify-payment?paymentId=pay_ABcd123456",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "razorpay", "verify-payment"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"payment\": {\n    \"paymentId\": \"pay_ABcd123456\",\n    \"orderId\": \"ORD-1234567890-1234\",\n    \"amount\": 100000,\n    \"status\": \"captured\",\n    \"method\": \"card\",\n    \"signatureVerified\": true\n  }\n}"
        }
      ]
    },
    {
      "name": "5. Webhook Endpoint",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-razorpay-signature",
            "value": "{{webhook_signature}}",
            "description": "Webhook signature from Razorpay"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"entity\": \"event\",\n  \"account_id\": \"acc_test123\",\n  \"event\": \"payment.captured\",\n  \"contains\": [\"payment\"],\n  \"payload\": {\n    \"payment\": {\n      \"entity\": {\n        \"id\": \"pay_ABcd123456\",\n        \"entity\": \"payment\",\n        \"amount\": 100000,\n        \"currency\": \"INR\",\n        \"status\": \"captured\",\n        \"order_id\": \"order_MNop123456\",\n        \"method\": \"card\",\n        \"amount_refunded\": 0,\n        \"refund_status\": null,\n        \"captured\": true,\n        \"email\": \"john@example.com\",\n        \"contact\": \"9876543210\",\n        \"created_at\": 1699876543\n      }\n    }\n  },\n  \"created_at\": 1699876543\n}"
        },
        "url": {
          "raw": "http://localhost:3000/api/razorpay/webhook",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["api", "razorpay", "webhook"]
        },
        "description": "Webhook endpoint that receives events from Razorpay. This is called automatically by Razorpay when events occur (payment.captured, payment.failed, etc.)"
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "http://localhost:3000/api/razorpay/webhook",
              "protocol": "http",
              "host": ["localhost"],
              "port": "3000",
              "path": ["api", "razorpay", "webhook"]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [],
          "cookie": [],
          "body": "{\n  \"success\": true,\n  \"message\": \"Webhook processed successfully\"\n}"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ]
}
